<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0-M13 from src/site/apt/modules.apt at 2024-06-21
 | Rendered using Apache Maven Fluido Skin 2.0.0-M8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0-M13" />
    <meta name="date" content="2023" />
    <title>CS-Shell-FLUTE EPICS Application Server â€“ FLUTE CosntrolSystem Shell Extensions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0-M8.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0-M8.min.js"></script>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>CS-Shell-FLUTE EPICS Application Server</h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-06-21<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0</li>
        <li class="pull-right"><a href="https://github.com/KIT-IBPT/epics-cs-shell-flute" target="_blank" class="externalLink">Source repository: https://github.com/KIT-IBPT/epics-cs-shell-flute</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Overview</a></li>
    <li class="active"><a>Modules</a></li>
    <li><a href="emittance.html">Emittance Measurement</a></li>
    <li><a href="development.html">Development Guide</a></li>
    <li><a href="apidocs/index.html">Javadoc</a></li>
   <li class="nav-header">Projects</li>
    <li><a href="https://kit-ibpt.github.io/epics-cs-shell/" class="externalLink">CS-Shell App Server</a></li>
    <li><a href="https://kit-ibpt.github.io/epics-cs-shell-flute/" class="externalLink">CS-Shell-FLUTE App Server</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<p><b>Contents</b></p>
<ul>
<li><a href="#Server_Modules">Server Modules</a>
<ul>
<li><a href="#Records">Records</a>
<ul>
<li><a href="#JDoocsValueProcessor">JDoocsValueProcessor</a></li>
<li><a href="#ModeNotifyProcesssor">ModeNotifyProcesssor</a></li>
<li><a href="#SWRValueProcessor">SWRValueProcessor</a></li></ul></li>
<li><a href="#Applications">Applications</a>
<ul>
<li><a href="#ArrayDumpApplication">ArrayDumpApplication</a></li>
<li><a href="#BeamDumpApplication">BeamDumpApplication</a></li>
<li><a href="#BeamScanApplication">BeamScanApplication</a></li>
<li><a href="#BeamSpotApplication">BeamSpotApplication</a></li>
<li><a href="#BPMCalculatorApplication">BPMCalculatorApplication</a></li>
<li><a href="#EmittanceScanApplication">EmittanceScanApplication</a></li>
<li><a href="#EnergyScanApplication">EnergyScanApplication</a></li>
<li><a href="#FluteCalculator">FluteCalculator</a></li>
<li><a href="#FluteCyclingApplication">FluteCyclingApplication</a></li>
<li><a href="#ICTApplication">ICTApplication</a></li>
<li><a href="#LaserApplication">LaserApplication</a></li>
<li><a href="#MultiScanApplication">MultiScanApplication</a></li>
<li><a href="#PhaseScanApplication">PhaseScanApplication</a></li>
<li><a href="#PowerControlApplication">PowerControlApplication</a></li>
<li><a href="#PowerInterlockApplication">PowerInterlockApplication</a></li>
<li><a href="#PowerSplitterApplication">PowerSplitterApplication</a></li>
<li><a href="#StepFeedbackLoopApplication">StepFeedbackLoopApplication</a></li>
<li><a href="#StepFeedbackLoopApplication2">StepFeedbackLoopApplication2</a></li>
<li><a href="#StepFeedbackLoopApplication3">StepFeedbackLoopApplication3</a></li>
<li><a href="#StepFeedbackLoopApplication31">StepFeedbackLoopApplication31</a></li>
<li><a href="#StepFeedbackLoopApplication32">StepFeedbackLoopApplication32</a></li></ul></li></ul></li></ul><hr /><section>
<h1><a id="Server_Modules">Server Modules</a></h1>
<p>Below is list of server modules developed for FLUTE accelerator.</p><hr /><section>
<h2><a id="Records">Records</a></h2>
<p>Record specific to FLUTE, a record provides single EPICS PV, can be configured and can connect to other PVs.</p>
<p>Records are implemented by org.scictrl.csshell.epics.server.Record which uses an instance of org.scictrl.csshell.epics.server.ValueProcessor to process values. Most value processor are inherited from org.scictrl.csshell.epics.server.processor.MemoryValueProcessor.</p><hr /><section>
<h3><a id="JDoocsValueProcessor">JDoocsValueProcessor</a></h3>
<p>JDoocsValueProcessor class, two directional gateway that translates JDOOCS control system remote property values to EPICS PV values. Connects to JDOCS remote channel and exports corresponding EPICS channel with configured PV. EPICS PV can be read-only or writable.</p>
<p><i>p</i>ENSHOST property value must be set either as system property on level of system environment or system properties in order to find JDOOCS values.<i>/p</i></p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/jdoocs/JDoocsValueProcessor.html">org.scictrl.csshell.epics.server.jdoocs.JDoocsValueProcessor</a></p><section>
<h4>Configuration Parameters</h4>
<p>This record supports following parameters in addition to the parameters inherited from org.scictrl.csshell.epics.server.processor.MemoryValueProcessor and org.scictrl.csshell.epics.server.Record.</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;demo&gt;</td>
<td style="text-align: left;">Puts record in DEMo mode, no connections or calls are made to JDOOCS.</td>
<td style="text-align: center;">boolean</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">false</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;link&gt;</td>
<td style="text-align: left;">JDOOCS remote property name.</td>
<td style="text-align: center;">JDOOCS link string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;writable&gt;</td>
<td style="text-align: left;">Enables EPICS value to be sent to JDOOCS link.</td>
<td style="text-align: center;">boolean</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">false</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;ModeMailTest&quot;&gt;
  &lt;group name=&quot;LLRF&quot; path=&quot;F:RF:LLRF:02:&quot;&gt;
    &lt;group name=&quot;GUN&quot; path=&quot;Gun:&quot;&gt;
      &lt;record&gt;
        &lt;name&gt;Ctrl:Ampl&lt;/name&gt;
        &lt;type&gt;DBR_DOUBLE&lt;/type&gt;
        &lt;units&gt;V&lt;/units&gt;
        &lt;precision&gt;2&lt;/precision&gt;
        &lt;description&gt;Output amplitude&lt;/description&gt;
        &lt;processor instance=&quot;org.scictrl.csshell.epics.server.jdoocs.JDoocsValueProcessor&quot;&gt;
          &lt;writable&gt;true&lt;/writable&gt;
          &lt;trigger&gt;100&lt;/trigger&gt;
          &lt;link&gt;FLUTE.RF/LLRF.CONTROLLER/CTRL.GUN/SP.AMPL&lt;/link&gt;
        &lt;/processor&gt;
      &lt;/record&gt;
    &lt;/group&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="ModeNotifyProcesssor">ModeNotifyProcesssor</a></h3>
<p>ModeNotifyProcesssor forwards mail to predefined users when FLUTe mode is changed.</p>
<p>Status: ALPHA, not finished, not tested</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/processor/ModeNotifyProcesssor.html">org.scictrl.csshell.epics.server.processor.ModeNotifyProcesssor</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;inputs&gt;&lt;mode&gt;</td>
<td style="text-align: left;">PV name for operation mode record</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;inputs&gt;&lt;beamMode&gt;</td>
<td style="text-align: left;">PV name for beam mode record</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;ModeMailTest&quot;&gt;
  &lt;group name=&quot;ModeMail&quot; path=&quot;F:TEST:Mail:&quot;&gt;
    &lt;record&gt;
      &lt;name&gt;01&lt;/name&gt;
      &lt;processor instance=&quot;org.scictrl.csshell.epics.server.processor.ModeNotifyProcesssor&quot;&gt;
        &lt;inputs&gt;
          &lt;mode&gt;F:GL:Operation:Mode&lt;/mode&gt;
          &lt;beamMode&gt;F:GL:Operation:BeamMode&lt;/beamMode&gt;
        &lt;/inputs&gt;
      &lt;/processor&gt;
    &lt;/record&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="SWRValueProcessor">SWRValueProcessor</a></h3>
<p>SWRValueProcessor calculates SWR ratio between forward and reflected power.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/processor/SWRValueProcessor.html">org.scictrl.csshell.epics.server.processor.SWRValueProcessor</a></p><section>
<h4>Value Calculation</h4>
<div class="verbatim source"><pre class="prettyprint">
  if power:
              ( 1 + SQRT (reflected/forward) ) 
    result =  --------------------------------
              ( 1 - SQRT (reflected/forward) )
  
  if amplitude (not power):
              ( 1 + reflected/forward ) 
    result =  -------------------------
              ( 1 - reflected/forward )
</pre></div>
<p>Where: </p>
<ul>
<li>if reflected or forward less then minValue, then result is invalid</li>
<li>if <code>SQRT (reflected/forward)</code> or <code>( 1 - SQRT (reflected/forward) )</code> or <code>reflected/forward</code> or <code>( 1 - reflected/forward )</code> is less then zeroValue, then result is invalid</li></ul>
<p>After result has been found invalid, then for 10 seconds last good value is returned, if after this time result is still invalid, then invalid CA alarm is reported. </p></section><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;fwdPV&gt;</td>
<td style="text-align: left;">PV name for forward power record</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;refPV&gt;</td>
<td style="text-align: left;">PV name for reflected power record</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;power&gt;</td>
<td style="text-align: left;">If true (default) then inputs are in power and SQRT is applied to ration, otherwise is amplitude and no SQRT.</td>
<td style="text-align: center;">boolean</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">true</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;minValue&gt;</td>
<td style="text-align: left;">minimal input value, when power is below this value, then returned value is marked as invalid.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">0.01</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;zeroValue&gt;</td>
<td style="text-align: left;">minimal value to be considered not zero, in formulas divisions it made only with values higher than this, if less, then returned value is marked as invalid.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">0.0001</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;AppsDoocs&quot;&gt;
  &lt;group name=&quot;LLRF&quot; path=&quot;F:RF:LLRF:02:&quot;&gt;
    &lt;record&gt;
      &lt;name&gt;Gun:SWR&lt;/name&gt;
      &lt;precision&gt;2&lt;/precision&gt;
      &lt;processor instance=&quot;org.scictrl.csshell.epics.server.processor.SWRValueProcessor&quot;&gt;
        &lt;fwdPV&gt;${path}Gun:WGFwd:Power:Rdb&lt;/fwdPV&gt;
        &lt;refPV&gt;${path}Gun:WGRefl:Power:Rdb&lt;/refPV&gt;
      &lt;/processor&gt;
    &lt;/record&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section></section><section>
<h2><a id="Applications">Applications</a></h2>
<p>Application module is more complex then Record. It is confibured trough XML, it can connect to several PVs to get data, it can provide several PVs as means of controlling the application or providing it's results. </p><hr /><section>
<h3><a id="ArrayDumpApplication">ArrayDumpApplication</a></h3>
<p>ArrayDumpApplication monitors input PV array record, and dumps array values into file, if any value in array exceeds threshold value, configurable by PV.</p>
<p>Files are stored into directory provided with dataDir XML parameter and file names have prefix 'ArrayDump-'. When dataDir contains more generated files than maxFiles parameter specifies, oldest files are deleted until file number falls below max files limit.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/ArrayDumpApplication.html">org.scictrl.csshell.epics.server.application.ArrayDumpApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;input&gt;</td>
<td style="text-align: left;">PV name for input record, must be array record</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;treshold&gt;</td>
<td style="text-align: left;">threshold value, above which array is dumped to file</td>
<td style="text-align: center;">decimal</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">1.0</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;maxFiles&gt;</td>
<td style="text-align: left;">maximal number generated filed, old files are removed if exceeded.</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">100</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;dataDir&gt;</td>
<td style="text-align: left;">location of generated files.</td>
<td style="text-align: center;">local dir, string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Peak</code></td>
<td style="text-align: left;">peak value of last received array</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Treshold</code></td>
<td style="text-align: left;">threshold value for array, array is dumped to file if exceeded.</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:PV</code></td>
<td style="text-align: left;">String with PV name of input record.</td>
<td style="text-align: center;">string</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Dir</code></td>
<td style="text-align: left;">Directory to which array dump files are saved.</td>
<td style="text-align: center;">string</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;Aux&quot;&gt;
  &lt;group name=&quot;Global Misc&quot; path=&quot;F:GL:&quot;&gt;
    &lt;group name=&quot;array_templ&quot; template=&quot;true&quot;&gt;
      &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.ArrayDumpApplication&quot;&gt;
        &lt;name&gt;ArrayDump:${id}&lt;/name&gt;
        &lt;input&gt;F:RF:LLRF:01:${pv}&lt;/input&gt;
        &lt;maxFiles&gt;1000&lt;/maxFiles&gt;
        &lt;treshold&gt;1.0&lt;/treshold&gt;
        &lt;dataDir&gt;/home/fluteop/smbshare/Controlsystem/ArrayDump&lt;/dataDir&gt;
      &lt;/application&gt;
    &lt;/group&gt;
    &lt;group&gt;&lt;substitutions&gt;&lt;id&gt;01&lt;/id&gt;&lt;pv&gt;GunWG:Ref:Amplitude:Samples&lt;/pv&gt;&lt;/substitutions&gt;&lt;insert&gt;array_templ&lt;/insert&gt;&lt;/group&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="BeamDumpApplication">BeamDumpApplication</a></h3>
<p>BeamDumpApplication stores image (of a beam) into files on drive on event from tirgger PV called drops. </p>
<p>Image is stored as an array, additionally there is information of timestamp and of width and height of image.</p>
<p>Files are stored into directory provided with dataDir XML parameter and file names have prefix 'BeamDump-'. When dataDir contains more generated files than maxFiles parameter specifies, oldest files are deleted until file number falls below max files limit.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/BeamDumpApplication.html">org.scictrl.csshell.epics.server.application.BeamDumpApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;dropsPV&gt;</td>
<td style="text-align: left;">PV name for trigger record, triggers image dump</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;imageHeightPV&gt;</td>
<td style="text-align: left;">PV name for record with image height</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;imageWidthPV&gt;</td>
<td style="text-align: left;">PV name for record with image width</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;imagePV&gt;</td>
<td style="text-align: left;">PV name for record with array containing image</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;maxFiles&gt;</td>
<td style="text-align: left;">maximal number generated filed, old files are removed if exceeded.</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">100</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;dataDir&gt;</td>
<td style="text-align: left;">location of generated files.</td>
<td style="text-align: center;">local dir, string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Enabled</code></td>
<td style="text-align: left;">enables/disables the application</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Last:Image</code></td>
<td style="text-align: left;">last saved image.</td>
<td style="text-align: center;">pixels as integer array</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Last:Time</code></td>
<td style="text-align: left;">last saved image timestamp.</td>
<td style="text-align: center;">UTC as long</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Last:Time:Str</code></td>
<td style="text-align: left;">last saved image timestamp as human friendly string. Formatted ISO date-time, such as '2011-12-03T10:15:30'.</td>
<td style="text-align: center;">string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Dir</code></td>
<td style="text-align: left;">Directory to which array dump files are saved.</td>
<td style="text-align: center;">string</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;Aux&quot;&gt;
  &lt;group name=&quot;Global Misc&quot; path=&quot;F:GL:&quot;&gt;
    &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.BeamDumpApplication&quot;&gt;
      &lt;name&gt;BeamDump:01&lt;/name&gt;
      &lt;dropsPV&gt;F:RF:LLRF:01:Counter:Drops1s&lt;/dropsPV&gt;
      &lt;imageHeightPV&gt;F:GL:Python:03:DiagCam:ImgHeight&lt;/imageHeightPV&gt;
      &lt;imageWidthPV&gt;F:GL:Python:03:DiagCam:ImgWidth&lt;/imageWidthPV&gt;
      &lt;imagePV&gt;F:GL:Python:03:DiagCam:Image_Sum&lt;/imagePV&gt;
      &lt;maxFiles&gt;1000&lt;/maxFiles&gt;
      &lt;dataDir&gt;/home/fluteop/smbshare/Controlsystem/BeamDump&lt;/dataDir&gt;
    &lt;/application&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="BeamScanApplication">BeamScanApplication</a></h3>
<p>BeamScanApplication scans the beam with four control values: power, phase, solenoid magnet and bending magnet. It records beam position and shape and filters and averages the beam values. Values with Q below configured threshold are discarded.</p>
<p>Four parameters, which are beeing scannes: Power, Phase, Solenoid, Bend, have own set of scan properties and control PVs, which are being provided by org.scictrl.csshell.epics.server.application.ScanApplication, that is embedded in this application.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/BeamScanApplication.html">org.scictrl.csshell.epics.server.application.BeamScanApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;Power&gt;&lt;precision&gt;, &lt;Phase&gt;&lt;precision&gt;, &lt;Solenoid&gt;&lt;precision&gt;, &lt;Bend&gt;&lt;precision&gt;</td>
<td style="text-align: left;">precision for 4 scan modules, determines when scan value is close enough to target value.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">0.000001</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;Power&gt;&lt;setpointPV&gt;, &lt;Phase&gt;&lt;setpointPV&gt;, &lt;Solenoid&gt;&lt;setpointPV&gt;, &lt;Bend&gt;&lt;setpointPV&gt;</td>
<td style="text-align: left;">PV name for corresponding record that is being scanned.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;Power&gt;&lt;setpointCmdPV&gt;, &lt;Phase&gt;&lt;setpointCmdPV&gt;, &lt;Solenoid&gt;&lt;setpointCmdPV&gt;, &lt;Bend&gt;&lt;setpointCmdPV&gt;</td>
<td style="text-align: left;">PV name for record that is necessary to be set after scan value has been set. Some devices need to apply value after has been set, optional depending on device.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;beamSpotPv&gt;</td>
<td style="text-align: left;">PV for beam spot measurement device, expected device and format is <a href="./apidocs/org/scictrl/csshell/epics/server/application/BeamSpotApplication.html">org.scictrl.csshell.epics.server.application.BeamSpotApplication</a></td>
<td style="text-align: center;">PV device prefix string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:BeamSpot:01</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;measurementWait&gt;</td>
<td style="text-align: left;">wait time between beam measurements.</td>
<td style="text-align: center;">ms as long</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">10000</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Power:...</code>, <code>:Phase:...</code>, <code>:Solenoid:...</code>, <code>:Bend:...</code></td>
<td style="text-align: left;">Access to embedded scanning tools PVs is provided by org.scictrl.csshell.epics.server.application.ScanApplication.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Cmd:Start</code></td>
<td style="text-align: left;">Starts scanning task. Setting 1 triggers command.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Cmd:Stop</code></td>
<td style="text-align: left;">Stops scanning task.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Meas:Last</code></td>
<td style="text-align: left;">Last beam measurement.</td>
<td style="text-align: center;">Array with measurements</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Meas:Peak</code></td>
<td style="text-align: left;">Beam measurement at peak beam, that is largest beam area.</td>
<td style="text-align: center;">Array with measurements</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status</code></td>
<td style="text-align: left;">Scanning status.</td>
<td style="text-align: center;">Enum with states: READY, SCANNING, ERROR</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Progress</code></td>
<td style="text-align: left;">Scanning progress</td>
<td style="text-align: center;">% as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Remaining</code></td>
<td style="text-align: left;">Estimated remaining time of scan</td>
<td style="text-align: center;">human friendly time format as string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Scanning</code></td>
<td style="text-align: left;">Boolean flag indicating scanning in progress.</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Wait</code></td>
<td style="text-align: left;">wait time between beam measurements</td>
<td style="text-align: center;">0 to 1000 s as double</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim source"><pre class="prettyprint">&lt;server name=&quot;Aux&quot;&gt;
  &lt;group name=&quot;BeamScan&quot; path=&quot;F:GL:BeamScan:&quot;&gt;
    &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.BeamScanApplication&quot;&gt;
      &lt;name&gt;01&lt;/name&gt;
      &lt;Power&gt;
        &lt;setpointPV&gt;F:RF:LLRF:01:Control:Power&lt;/setpointPV&gt;
        &lt;precision&gt;0.0001&lt;/precision&gt;
      &lt;/Power&gt;
      &lt;Phase&gt;
        &lt;setpointPV&gt;F:RF:LLRF:01:Control:Phase&lt;/setpointPV&gt;
        &lt;precision&gt;0.0001&lt;/precision&gt;
      &lt;/Phase&gt;
      &lt;Solenoid&gt;
        &lt;setpointPV&gt;F:INJ-1:PS:MSol-01:Current:Setpoint&lt;/setpointPV&gt;
        &lt;precision&gt;0.0001&lt;/precision&gt;
      &lt;/Solenoid&gt;
      &lt;Bend&gt;
        &lt;setpointPV&gt;F:INJ-1:PS:MB-01:Current:Setpoint&lt;/setpointPV&gt;
        &lt;precision&gt;0.0001&lt;/precision&gt;
      &lt;/Bend&gt;
      &lt;beamSpotPv&gt;F:GL:BeamSpot:01&lt;/beamSpotPv&gt;
      &lt;measurementWait&gt;10000&lt;/measurementWait&gt;
    &lt;/application&gt;      
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="BeamSpotApplication">BeamSpotApplication</a></h3>
<p>BeamSpotApplication connects server with direct beam parameters, then filters and averages them and provides summary data. Measurements with Q below threshold are discarded as unreliable.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/BeamSpotApplication.html">org.scictrl.csshell.epics.server.application.BeamSpotApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;count&gt;</td>
<td style="text-align: left;">number of measurements to be taken into averaging.</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">1</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;findBeamPv&gt;</td>
<td style="text-align: left;">PV for automatic beam recognition by frame grabber.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:Python:01:DiagCam:Do_ROI</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;chi2_h&gt;</td>
<td style="text-align: left;">input PV for chi square in H</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;chi2_v&gt;</td>
<td style="text-align: left;">input PV for chi square in V</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;fwhm_h&gt;</td>
<td style="text-align: left;">input PV for FWHM in H</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;fwhm_v&gt;</td>
<td style="text-align: left;">input PV for FWHM in V</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;pos_h&gt;</td>
<td style="text-align: left;">input PV for position in H</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;pos_v&gt;</td>
<td style="text-align: left;">input PV for position in V</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;size_h&gt;</td>
<td style="text-align: left;">input PV for size in H</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;inputPvs&gt;&lt;size_v&gt;</td>
<td style="text-align: left;">input PV for size in V</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;laserSwitchPv&gt;</td>
<td style="text-align: left;">PV for switching on/off the laser.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:LAS:Timing:01:PulsePicker:Enabled</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;range&gt;&lt;area&gt;</td>
<td style="text-align: left;">limit for acceptable beam spot area size.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.1</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;range&gt;&lt;center&gt;</td>
<td style="text-align: left;">limit for acceptable position range center.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.1</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;range&gt;&lt;chi2_min&gt;</td>
<td style="text-align: left;">lower limit for acceptable Chi square.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.0</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;range&gt;&lt;chi2_max&gt;</td>
<td style="text-align: left;">upper limit for acceptable Chi square.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">1.0</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;range&gt;&lt;deviation&gt;</td>
<td style="text-align: left;">limit for acceptable averaging deviation.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.1</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;range&gt;&lt;h_min&gt;</td>
<td style="text-align: left;">lower limit for acceptable position range in H.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">-8.0</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;range&gt;&lt;h_max&gt;</td>
<td style="text-align: left;">upper limit for acceptable position range in H.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">8.0</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;range&gt;&lt;v_min&gt;</td>
<td style="text-align: left;">lower limit for acceptable position range in V.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">-8.0</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;range&gt;&lt;v_max&gt;</td>
<td style="text-align: left;">upper limit for acceptable position range in V.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">8.0</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;takeBackgroundPv&gt;</td>
<td style="text-align: left;">PV for taking fresh screen background for background substractions.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:Python:01:DiagCam:Take_New_BG</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;takeBackgroundBusyPv&gt;</td>
<td style="text-align: left;">PV for signal notifying frame grabber is bussy with backgroudn measurement.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:Python:01:DiagCam:BG_proc</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;time_window&gt;</td>
<td style="text-align: left;">only calculate averages, if timestamps of received values are within this time window</td>
<td style="text-align: center;">ms as long</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">500</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Area</code></td>
<td style="text-align: left;">Averaged beam spot area.</td>
<td style="text-align: center;">mm^2 as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Area:Min</code></td>
<td style="text-align: left;">minimal beam spot area out of averaged.</td>
<td style="text-align: center;">mm^2 as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Area:Std</code></td>
<td style="text-align: left;">STD for beam spot area.</td>
<td style="text-align: center;">mm^2 as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Count</code></td>
<td style="text-align: left;">Averaging count.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Chi2:H</code></td>
<td style="text-align: left;">Maximal Chi square in horizontal.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Chi2:V</code></td>
<td style="text-align: left;">Maximal Chi square in vertical.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Cmd:BgTake</code></td>
<td style="text-align: left;">Command to take beam background measurement.</td>
<td style="text-align: center;">1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Data</code></td>
<td style="text-align: left;">Array with combined essential data. see <a id="a.40link_BeamSpotData">@link BeamSpotData</a> for field descriptions</td>
<td style="text-align: center;">array</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Deviation</code></td>
<td style="text-align: left;">Deviation of averages.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Fwhm:H</code></td>
<td style="text-align: left;">Averaged FWHM square in horizontal.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Fwhm:V</code></td>
<td style="text-align: left;">Averaged FWHM square in vertical.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Pos:H</code></td>
<td style="text-align: left;">Averaged position in horizontal.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Pos:H:Std</code></td>
<td style="text-align: left;">STD for horizontal position.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Pos:V</code></td>
<td style="text-align: left;">Averaged position vertical.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Pos:V:Std</code></td>
<td style="text-align: left;">STD for vertical position.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Range:Area</code></td>
<td style="text-align: left;">limit for acceptable beam spot area size.</td>
<td style="text-align: center;">mm^2 as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Range:Center</code></td>
<td style="text-align: left;">limit for acceptable position range center.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Range:Deviation</code></td>
<td style="text-align: left;">limit for acceptable averaging deviation.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Range:Hor:Min</code></td>
<td style="text-align: left;">lower limit for acceptable position range in H.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Range:Hor:Max</code></td>
<td style="text-align: left;">upper limit for acceptable position range in H.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Range:Ver:Min</code></td>
<td style="text-align: left;">lower limit for acceptable position range in V.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Range:Ver:Max</code></td>
<td style="text-align: left;">upper limit for acceptable position range in V.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Range:Chi2:Min</code></td>
<td style="text-align: left;">lower limit for acceptable Chi square.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Range:Chi2:Max</code></td>
<td style="text-align: left;">upper limit for acceptable Chi square.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Size:H</code></td>
<td style="text-align: left;">Averaged size in horizontal.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Size:H:Std</code></td>
<td style="text-align: left;">STD for horizontal size.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Size:V</code></td>
<td style="text-align: left;">Averaged size in vertical.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Size:V:Std</code></td>
<td style="text-align: left;">STD for vertical size.</td>
<td style="text-align: center;">mm as double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:BgBusy</code></td>
<td style="text-align: left;">Busy taking background measurement.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Centred</code></td>
<td style="text-align: left;">Beam position centred on 0.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:FitGood</code></td>
<td style="text-align: left;">Beam gauss fit chi square below threshold.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:InRange</code></td>
<td style="text-align: left;">Beam position within range window.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Small</code></td>
<td style="text-align: left;">Beam area below threshold.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Stable</code></td>
<td style="text-align: left;">Beam position reading stable.</td>
<td style="text-align: center;">status bit as byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Valid</code></td>
<td style="text-align: left;">Beam position valid.</td>
<td style="text-align: center;">status bit as byte</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;Main&quot;&gt;
  &lt;group name=&quot;BeamSpot&quot; path=&quot;F:GL:BeamSpot:&quot;&gt;
    &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.BeamSpotApplication&quot;&gt;
      &lt;name&gt;01&lt;/name&gt;
      &lt;count&gt;10&lt;/count&gt;
      &lt;timeWindow&gt;500&lt;/timeWindow&gt;
      &lt;inputPvs&gt;
        &lt;size_h&gt;F:GL:Python:01:DiagCam:GAUSS:SIGMA:HOR&lt;/size_h&gt;
        &lt;size_v&gt;F:GL:Python:01:DiagCam:GAUSS:SIGMA:VER&lt;/size_v&gt;
        &lt;pos_h&gt;F:GL:Python:01:DiagCam:GAUSS:MU:HOR&lt;/pos_h&gt;
        &lt;pos_v&gt;F:GL:Python:01:DiagCam:GAUSS:MU:VER&lt;/pos_v&gt;
        &lt;chi2_h&gt;F:GL:Python:01:DiagCam:GAUSS:RCHI:HOR&lt;/chi2_h&gt;
        &lt;chi2_v&gt;F:GL:Python:01:DiagCam:GAUSS:RCHI:VER&lt;/chi2_v&gt;
        &lt;fwhm_h&gt;F:GL:Python:01:DiagCam:FWHM:WID:HOR&lt;/fwhm_h&gt;
        &lt;fwhm_v&gt;F:GL:Python:01:DiagCam:FWHM:WID:VER&lt;/fwhm_v&gt;
      &lt;/inputPvs&gt;
      &lt;range&gt;
        &lt;h_min&gt;-8.0&lt;/h_min&gt;
        &lt;h_max&gt;8.0&lt;/h_max&gt;
        &lt;v_min&gt;-8.0&lt;/v_min&gt;
        &lt;v_max&gt;8.0&lt;/v_max&gt;
        &lt;center&gt;0.1&lt;/center&gt;
        &lt;deviation&gt;1.2&lt;/deviation&gt;
        &lt;area&gt;0.1&lt;/area&gt;
        &lt;chi2_min&gt;0.0&lt;/chi2_min&gt;
        &lt;chi2_max&gt;2.0&lt;/chi2_max&gt;
      &lt;/range&gt;
    &lt;/application&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="BPMCalculatorApplication">BPMCalculatorApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="EmittanceScanApplication">EmittanceScanApplication</a></h3>
<p>EmittanceScanApplication scans the quadruple magnet, measures beam size and then calculates emittance.</p>
<p>Scan of quadruple magnet is done in server, measurements are passed to Python script and then presented back trough server to GUI.</p>
<p>Measurements are stored on server computer in folder provided trough configuration, usual value is <code>/home/fluteop/smbshare/Controlsystem/EmittanceScan/data</code>. </p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/EmittanceScanApplication.html">org.scictrl.csshell.epics.server.application.EmittanceScanApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;beamSpotPv&gt;</td>
<td style="text-align: left;">PV for beam spot measurement device, expected device and format is <a href="./apidocs/org/scictrl/csshell/epics/server/application/BeamSpotApplication.html">org.scictrl.csshell.epics.server.application.BeamSpotApplication</a></td>
<td style="text-align: center;">PV device prefix string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:BeamSpot:01</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;dataDir&gt;</td>
<td style="text-align: left;">Directory where measurements are stored.</td>
<td style="text-align: center;">directory path string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;"><code>&lt;confih home&gt;/data</code></td></tr>
<tr class="b">
<td style="text-align: left;">&lt;enableBackgroundPv&gt;</td>
<td style="text-align: left;">Enables/disables background substraction.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:Python:01:DiagCam:Subt_BG</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;laserSwitchPv&gt;</td>
<td style="text-align: left;">Laser switching On/Off.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:LAS:Timing:01:PulsePicker:Enabled</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;measurementWait&gt;</td>
<td style="text-align: left;">wait time between beam measurements.</td>
<td style="text-align: center;">ms as long</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">10000</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;pythonDir&gt;</td>
<td style="text-align: left;">Directory where Python scripts are stored.</td>
<td style="text-align: center;">directory path string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;"><code>&lt;confih home&gt;/Python</code></td></tr>
<tr class="b">
<td style="text-align: left;">&lt;pythonScript&gt;</td>
<td style="text-align: left;">Python scripts file name, located in Python directory.</td>
<td style="text-align: center;">file name</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;"><code>emittance.py</code></td></tr>
<tr class="a">
<td style="text-align: left;">&lt;Quad&gt;&lt;precision&gt;</td>
<td style="text-align: left;">precision for scan module, determines when scan value is close enough to target value.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">0.000001</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;Quad&gt;&lt;setpointPV&gt;</td>
<td style="text-align: left;">PV name for corresponding record that is being scanned.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;screenSwitchPv&gt;</td>
<td style="text-align: left;">PV for flourecent screen switching control.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:Python:01:DiagCam:Camera</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;takeBackgroundBusyPv&gt;</td>
<td style="text-align: left;">Video server is bussy taking background image.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:BeamSpot:01:Status:BgBusy</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;takeBackgroundPv&gt;</td>
<td style="text-align: left;">Takes background image for background substraction.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:GL:BeamSpot:01:Cmd:BgTake</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Cmd:Start</code></td>
<td style="text-align: left;">Starts scanning task. Setting 1 triggers command.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Cmd:Stop</code></td>
<td style="text-align: left;">Stops scanning task.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Emittance:H</code></td>
<td style="text-align: left;">Emittance calculation result, horizontal.</td>
<td style="text-align: center;">double, mm&#xd7;mrad</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Emittance:H:Std</code></td>
<td style="text-align: left;">Emittance calculation result, horizontal STD.</td>
<td style="text-align: center;">double, mm&#xd7;mrad</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Emittance:V</code></td>
<td style="text-align: left;">Emittance calculation result, vertical.</td>
<td style="text-align: center;">double, mm&#xd7;mrad</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Emittance:V:Std</code></td>
<td style="text-align: left;">Emittance calculation result, vertical STD.</td>
<td style="text-align: center;">double, mm&#xd7;mrad</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Energy</code></td>
<td style="text-align: left;">Manual input for beam energy in MeV, used in emittance calculation.</td>
<td style="text-align: center;">double, MeV</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Meas:Last</code></td>
<td style="text-align: left;">Last beam measurement.</td>
<td style="text-align: center;">Array with measurements</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Meas:Table</code></td>
<td style="text-align: left;">Beam measurement as data table.</td>
<td style="text-align: center;">String table with measurements</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Opt:EnableBg</code></td>
<td style="text-align: left;">Enables background substractions option.</td>
<td style="text-align: center;">byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Opt:LaserOff</code></td>
<td style="text-align: left;">Switches laser off at the end option.</td>
<td style="text-align: center;">byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Opt:LaserOn</code></td>
<td style="text-align: left;">Switches laser on at the start option.</td>
<td style="text-align: center;">byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Opt:Repeat</code></td>
<td style="text-align: left;">How many repeats option.</td>
<td style="text-align: center;">int</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Opt:TakeBg</code></td>
<td style="text-align: left;">Takes new background each measurement option.</td>
<td style="text-align: center;">byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Opt:ValidOnly</code></td>
<td style="text-align: left;">Accept only valid measurements</td>
<td style="text-align: center;">byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Quad:...</code></td>
<td style="text-align: left;">Access to embedded scanning tools PVs is provided by org.scictrl.csshell.epics.server.application.ScanApplication.</td>
<td style="text-align: center;"></td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status</code></td>
<td style="text-align: left;">Scanning status.</td>
<td style="text-align: center;">Enum with states: READY, SETTING_BEND, SCANNING, PAUSED, ERROR</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:DataFile</code></td>
<td style="text-align: left;">File name on server with measurements.</td>
<td style="text-align: center;">file name as string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Progress</code></td>
<td style="text-align: left;">Scanning progress</td>
<td style="text-align: center;">% as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Remaining</code></td>
<td style="text-align: left;">Estimated remaining time of scan</td>
<td style="text-align: center;">human friendly time format as string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Remaining:ms</code></td>
<td style="text-align: left;">Estimated remaining time of scan</td>
<td style="text-align: center;">milliseconds as long</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Repeat</code></td>
<td style="text-align: left;">Current repeat count</td>
<td style="text-align: center;">int</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Scanning</code></td>
<td style="text-align: left;">Boolean flag indicating scanning in progress.</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Wait</code></td>
<td style="text-align: left;">wait time between beam measurements</td>
<td style="text-align: center;">0 to 1000 s as double</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;Aux&quot;&gt;
    &lt;group name=&quot;EmittanceScan&quot; path=&quot;F:GL:EmittanceScan:&quot;&gt;
      &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.EmittanceScanApplication&quot;&gt;
        &lt;name&gt;01&lt;/name&gt;
        &lt;Quad&gt;
          &lt;setpointPV&gt;F:INJ-1:PS:MQ-01:Current:Setpoint&lt;/setpointPV&gt;
          &lt;precision&gt;0.0001&lt;/precision&gt;
        &lt;/Quad&gt;
        &lt;beamSpotPv&gt;F:GL:BeamSpot:01&lt;/beamSpotPv&gt;
        &lt;measurementWait&gt;10000&lt;/measurementWait&gt;
        &lt;scanOpt&gt;
          &lt;inpPrec&gt;0.01&lt;/inpPrec&gt;
          &lt;outPrec&gt;0.01&lt;/outPrec&gt;
        &lt;/scanOpt&gt;
        &lt;dataDir&gt;/home/fluteop/smbshare/Controlsystem/EmittanceScan/data&lt;/dataDir&gt;
      &lt;/application&gt;
    &lt;/group&gt;    
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="EnergyScanApplication">EnergyScanApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="FluteCalculator">FluteCalculator</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="FluteCyclingApplication">FluteCyclingApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="ICTApplication">ICTApplication</a></h3>
<p>ICTApplication converts charge readout from ADC (BCM - Beam Charge Monitor pickup) to beam charge value.</p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/ICTApplication.html">org.scictrl.csshell.epics.server.application.ICTApplication</a></p><section>
<h4>Value Calculation</h4>
<div class="verbatim source"><pre class="prettyprint">
  Q =  Qcal * 10 ^ ( BCM / Ucal)
</pre></div>
<p>Where: <code>Qcal</code> and <code>Ucal</code> are BCM calibration parameters. </p></section><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;qcal&gt;</td>
<td style="text-align: left;">Qcal calibration factor</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.0</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;ucal&gt;</td>
<td style="text-align: left;">Ucal calibration factor</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">0.0</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;input&gt;</td>
<td style="text-align: left;">PV name for BCM readout</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Bcm</code></td>
<td style="text-align: left;">Forwards value from BCM input PV.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Q</code></td>
<td style="text-align: left;">ICT charge value</td>
<td style="text-align: center;">double, pC</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;AppsAux&quot;&gt;
  &lt;group name=&quot;ICT&quot; path=&quot;F:INJ-1:ICT:&quot;&gt;
    &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.ICTApplication&quot;&gt;
      &lt;name&gt;01&lt;/name&gt;
      &lt;input&gt;F:AX:DAQDT:05:1:Wave:32:Sample&lt;/input&gt;
      &lt;qcal&gt;0.00981&lt;/qcal&gt;
      &lt;ucal&gt;0.809113&lt;/ucal&gt;
    &lt;/application&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="LaserApplication">LaserApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="MultiScanApplication">MultiScanApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="PhaseScanApplication">PhaseScanApplication</a></h3>
<p>PhaseScanApplication scans LLRF Gun Phase and records ICT response. </p>
<p>Then searches for three reference points (or breakpoint):</p>
<ul>
<li>first high point (local maximum), then</li>
<li>low point (local minimum), then</li>
<li>second high point (absolute maximum).</li></ul>
<p>First reference point provides calculation reference for four workpoints:</p>
<ul>
<li>Q max</li>
<li>Q / A max</li>
<li>p max</li>
<li>sigma min</li></ul>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/PhaseScanApplication.html">org.scictrl.csshell.epics.server.application.PhaseScanApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;dataDir&gt;</td>
<td style="text-align: left;">location of generated files.</td>
<td style="text-align: center;">local dir, string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;ictPV&gt;</td>
<td style="text-align: left;">PV for ICT measurement</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">F:INJ-1:ICT:01:Q</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;measurementWait&gt;</td>
<td style="text-align: left;">wait time between beam measurements.</td>
<td style="text-align: center;">ms as long</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">10000</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;Phase&gt;&lt;precision&gt;</td>
<td style="text-align: left;">precision for 4 scan modules, determines when scan value is close enough to target value.</td>
<td style="text-align: center;">double</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">0.000001</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;Phase&gt;&lt;setpointPV&gt;</td>
<td style="text-align: left;">PV name for corresponding record that is being scanned.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;Phase&gt;&lt;setpointCmdPV&gt;</td>
<td style="text-align: left;">PV name for record that is necessary to be set after scan value has been set. Some devices need to apply value after has been set, optional depending on device.</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Phase:...</code></td>
<td style="text-align: left;">Access to embedded scanning tools PVs is provided by org.scictrl.csshell.epics.server.application.ScanApplication.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Cmd:Calc</code></td>
<td style="text-align: left;">Prepared measurements, then calculates reference points and work points.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Cmd:Start</code></td>
<td style="text-align: left;">Starts scanning task. Setting 1 triggers command.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Cmd:Stop</code></td>
<td style="text-align: left;">Stops scanning task.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Data:Breakpoints</code></td>
<td style="text-align: left;">Phase value at reference points (breakpoints: local high, low, abs. high) as result of breakpoint finding algorithm.</td>
<td style="text-align: center;">array of 3 doubles</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Data:Breakpoints:ICT</code></td>
<td style="text-align: left;">ICT value at reference points, corresponding to 3 <code>:Data:Breakpoints</code> points. Useful for chart presentation.</td>
<td style="text-align: center;">array of 3 doubles</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Data:ICT</code></td>
<td style="text-align: left;">ICT value measurements after smoothing filter.</td>
<td style="text-align: center;">array of doubles</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Data:Workpoints</code></td>
<td style="text-align: left;">Phase value at workpoints (Q max, Q / A max, p max, sigma min) as result of calculation.</td>
<td style="text-align: center;">array of 4 doubles</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Data:Pmax</code></td>
<td style="text-align: left;">Phase value at p max workpoint, as in <code>:Data:Workpoints</code>.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Data:Qmax</code></td>
<td style="text-align: left;">Phase value at Q max workpoint, as in <code>:Data:Workpoints</code>.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Data:QAmax</code></td>
<td style="text-align: left;">Phase value at Q / A max workpoint, as in <code>:Data:Workpoints</code>.</td>
<td style="text-align: center;">double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Data:Smin</code></td>
<td style="text-align: left;">Phase value at sigma min workpoint, as in <code>:Data:Workpoints</code>.</td>
<td style="text-align: center;">double</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Data:Workpoints:ICT</code></td>
<td style="text-align: left;">ICT value at workpoints, corresponding to 4 <code>:Data:Workpoints</code> points. Useful for chart presentation.</td>
<td style="text-align: center;">array of 4 doubles</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Meas:ICT</code></td>
<td style="text-align: left;">ICT value measurements.</td>
<td style="text-align: center;">array of doubles</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Meas:Phase</code></td>
<td style="text-align: left;">Phase value measurements.</td>
<td style="text-align: center;">array of doubles</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status</code></td>
<td style="text-align: left;">Scanning status.</td>
<td style="text-align: center;">Enum with states: READY, SCANNING, ERROR</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Progress</code></td>
<td style="text-align: left;">Scanning progress</td>
<td style="text-align: center;">% as double</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Remaining</code></td>
<td style="text-align: left;">Estimated remaining time of scan</td>
<td style="text-align: center;">human friendly time format as string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Remaining:ms</code></td>
<td style="text-align: left;">Estimated remaining time of scan in milliseconds</td>
<td style="text-align: center;">long, in milliseconds</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Scanning</code></td>
<td style="text-align: left;">Boolean flag indicating scanning in progress.</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Opt:Collapse</code></td>
<td style="text-align: left;">Enables averaging of ICT values for same Phase value.</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Opt:Samples</code></td>
<td style="text-align: left;">Enables smoothing ICT measurement curve by averaging ICS measurements over this count of neighbor points, reduces statistical fluctuation.</td>
<td style="text-align: center;">0,1 as byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Opt:Wait</code></td>
<td style="text-align: left;">wait before each measurement, in seconds</td>
<td style="text-align: center;">double, in seconds</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim source"><pre class="prettyprint">&lt;server name=&quot;Main&quot;&gt;
  &lt;group name=&quot;PhaseScan&quot; path=&quot;F:GL:PhaseScan:&quot;&gt;
    &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.PhaseScanApplication&quot;&gt;
      &lt;name&gt;01&lt;/name&gt;
      &lt;Phase&gt;
        &lt;setpointPV&gt;F:RF:LLRF:02:Gun:Ctrl:Phase&lt;/setpointPV&gt;
        &lt;precision&gt;0.0001&lt;/precision&gt;
      &lt;/Phase&gt;
      &lt;ictPV&gt;F:INJ-1:ICT:01:Q&lt;/ictPV&gt;
      &lt;measurementWait&gt;10000&lt;/measurementWait&gt;
      &lt;dataDir&gt;/home/fluteop/smbshare/Controlsystem/EnergyScan/data&lt;/dataDir&gt;
    &lt;/application&gt;
  &lt;/group&gt;    
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="PowerControlApplication">PowerControlApplication</a></h3>
<p>PowerControlApplication controls power output of LLRF DOOCS module from DESY. It wraps raw power control and provides following functionality:</p>
<ul>
<li>Last set power is stored and used when switches on.</li>
<li>Power is set only when switched on.</li>
<li>Power can be increased only when there is no active VSWR lock.</li>
<li>Setting power up ramps power. Setting power down goes in one step directly.</li>
<li>Switching off sets raw power output to 0.0 but keeps last setpoint reference. </li>
<li>Switching on ramps raw power output to the last setpoint reference. </li></ul>
<p>In addition it monitors two VSWR PVs and if any of these exceeds limit value, power is switched off. </p>
<p>Class: <a href="./apidocs/org/scictrl/csshell/epics/server/application/PowerControlApplication.html">org.scictrl.csshell.epics.server.application.PowerControlApplication</a></p><section>
<h4>Configuration Parameters</h4>
<table class="table table-bordered table-striped">
<tr class="a">
<th>XML parameter</th>
<th>Description</th>
<th>Value Type</th>
<th>Required</th>
<th>Default value</th></tr>
<tr class="b">
<td style="text-align: left;">&lt;swrWGPV&gt;</td>
<td style="text-align: left;">PV name for WaveGuide VSWR calculation</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="a">
<td style="text-align: left;">&lt;swrKlyPV&gt;</td>
<td style="text-align: left;">PV name for Klystron VSWR calculation</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr>
<tr class="b">
<td style="text-align: left;">&lt;powerPV&gt;</td>
<td style="text-align: left;">PV name for raw DOOCS Power control</td>
<td style="text-align: center;">PV string</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">none</td></tr></table></section><section>
<h4>Provided PVs</h4>
<p>Application provides PVs with following suffixes:</p>
<table class="table table-bordered table-striped">
<tr class="a">
<th>PV Suffix</th>
<th>Description</th>
<th>Value Type</th></tr>
<tr class="b">
<td style="text-align: left;"><code>:Cmd:Off</code></td>
<td style="text-align: left;">Command switching off.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Cmd:On</code></td>
<td style="text-align: left;">Command switching on.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:OffOn</code></td>
<td style="text-align: left;">Status and command, switches off or on.</td>
<td style="text-align: center;">0 or 1, byte</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:OffOn:Direct</code></td>
<td style="text-align: left;">Status and command, switches off or on, bypasses upword power ramp and sets directy.</td>
<td style="text-align: center;">0 or 1, byte</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Set</code></td>
<td style="text-align: left;">Intended Power setpoint, it is preserved when switched off.</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Set:Get</code></td>
<td style="text-align: left;">Power setpoint readback, actual output setpoint, goes to 0 when switched off.</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Set:Sync</code></td>
<td style="text-align: left;">Copies setpoint readback to setpoint.</td>
<td style="text-align: center;">byte, 1 triggers command</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Set:Diff</code></td>
<td style="text-align: left;">1 if setpoint and setpoint readback differ.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Locked</code></td>
<td style="text-align: left;">Locked status, bum of both locks.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:Kly:Locked</code></td>
<td style="text-align: left;">Klystron locked status.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:WG:Locked</code></td>
<td style="text-align: left;">WaveGuide locked status.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:Status:On</code></td>
<td style="text-align: left;">On status, 1 if on.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:Status:Scanning</code></td>
<td style="text-align: left;">Power is being ramped up.</td>
<td style="text-align: center;">byte, 0 or 1</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:SWR:WG</code></td>
<td style="text-align: left;">Provides copy WaveGuide SWR PV value.</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:SWR:WG</code></td>
<td style="text-align: left;">Provides copy Klystron SWR PV value.</td>
<td style="text-align: center;">decimal</td></tr>
<tr class="a">
<td style="text-align: left;"><code>:SWR:WG:Limit</code></td>
<td style="text-align: left;">VSWG value limit, locks controller if VSWR is higher.</td>
<td style="text-align: center;">string</td></tr>
<tr class="b">
<td style="text-align: left;"><code>:SWR:Kly:Limit</code></td>
<td style="text-align: left;">VSWG value limit, locks controller if VSWR is higher.</td>
<td style="text-align: center;">string</td></tr></table></section><section>
<h4>Example configuration</h4>
<div class="verbatim">
<pre>&lt;server name=&quot;AppsDoocs&quot;&gt;
  &lt;group name=&quot;LLRF&quot; path=&quot;F:RF:LLRF:02:&quot;&gt;
    &lt;group name=&quot;GUN&quot; path=&quot;Gun:&quot;&gt;
      &lt;application instance=&quot;org.scictrl.csshell.epics.server.application.PowerControlApplication&quot;&gt;
        &lt;name&gt;Ctrl:Ampl&lt;/name&gt;
        &lt;swrWGPV&gt;${path}SWR:Calc:AVG&lt;/swrWGPV&gt;
        &lt;swrKlyPV&gt;${path}K1:SWR:Calc:AVG&lt;/swrKlyPV&gt;
        &lt;powerPV&gt;${path}Ctrl:Ampl&lt;/powerPV&gt;
      &lt;/application&gt;
    &lt;/group&gt;
  &lt;/group&gt;
&lt;/server&gt;</pre></div><hr /></section></section><section>
<h3><a id="PowerInterlockApplication">PowerInterlockApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="PowerSplitterApplication">PowerSplitterApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="StepFeedbackLoopApplication">StepFeedbackLoopApplication</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="StepFeedbackLoopApplication2">StepFeedbackLoopApplication2</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="StepFeedbackLoopApplication3">StepFeedbackLoopApplication3</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="StepFeedbackLoopApplication31">StepFeedbackLoopApplication31</a></h3>
<p>TBD</p><hr /></section><section>
<h3><a id="StepFeedbackLoopApplication32">StepFeedbackLoopApplication32</a></h3>
<p>TBD</p></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Â©      2024
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>